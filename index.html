<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025 æ–°å¹´å¥½è¿ç­¾</title>
    <meta property="og:title" content="2025 æ–°å¹´å¥½è¿ç­¾" />
    <meta property="og:description" content="ç‚¹å‡»æŠ½å–ä½ çš„ä¸“å±æ–°å¹´ç¥ç¦ï¼Œæ¥æ”¶ä¸€æ•´å¹´çš„å¥½è¿ï¼" />
    
    <!-- å¼•å…¥ Tailwind CSS (æ ·å¼åº“) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            overflow: hidden;
            font-family: 'Noto Serif SC', serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .font-cursive { font-family: 'Ma Shan Zheng', cursive; }
        .animate-heartbeat { animation: heartbeat 2s infinite ease-in-out; }
        .animate-float { animation: float 3s infinite ease-in-out; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .animate-spin-slow { animation: spin-slow 8s linear infinite; }

        /* éšè—æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { display: none; }
        
        /* ç»ç’ƒæ‹Ÿæ€æ•ˆæœ */
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* é¡µé¢åˆ‡æ¢è¿‡æ¸¡ */
        .screen {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .hidden-screen {
            opacity: 0;
            pointer-events: none;
            transform: scale(1.1);
            z-index: -1;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "react/": "https://esm.sh/react@^19.2.3/",
    "framer-motion": "https://esm.sh/framer-motion@^12.23.26",
    "vite": "https://esm.sh/vite@^7.3.0"
  }
}
</script>
</head>
<body class="bg-black text-white h-screen w-screen relative">

    <!-- èƒŒæ™¯éŸ³ä¹ï¼šæ¢äº†ä¸€ä¸ªæ›´ç¨³å®šã€åŠ è½½æ›´å¿«çš„æ˜¥èŠ‚å–œåº†éŸ³ä¹æº -->
    <audio id="bg-music" loop preload="auto">
        <source src="https://music.163.com/song/media/outer/url?id=1336856426.mp3" type="audio/mpeg">
    </audio>

    <!-- éŸ³ä¹å¼€å…³æŒ‰é’® -->
    <button id="music-btn" class="fixed top-4 right-4 z-50 p-3 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white shadow-lg" onclick="toggleMusic(event)">
        <div id="music-icon-wrapper">
            <svg id="music-icon-off" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle><line x1="2" y1="2" x2="22" y2="22"></line></svg>
            <svg id="music-icon-on" class="hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
        </div>
    </button>

    <!-- çƒŸèŠ±ç”»å¸ƒ -->
    <canvas id="fireworks" class="fixed inset-0 pointer-events-none z-0 mix-blend-screen"></canvas>

    <!-- èƒŒæ™¯å±‚ -->
    <div class="fixed inset-0 bg-[radial-gradient(circle_at_50%_50%,_#2a0808_0%,_#000000_100%)] z-[-1]"></div>

    <!-- å±å¹•1ï¼šçº¢åŒ…å°é¢ -->
    <div id="screen-envelope" class="screen z-20">
        <div class="relative w-[85%] max-w-[320px] aspect-[3/4.5] rounded-xl shadow-2xl animate-float cursor-pointer" onclick="openEnvelope()">
            <!-- çº¢åŒ…ä¸»ä½“ -->
            <div class="absolute inset-0 bg-[#cf3c32] rounded-xl overflow-hidden border border-[#d95940]">
                <!-- é¡¶éƒ¨å¼§å½¢ -->
                <div class="absolute top-0 left-0 right-0 h-[65%] bg-[#d95940] rounded-b-[50%] shadow-lg flex flex-col items-center pt-12 z-10">
                    <div class="w-14 h-14 bg-[#ebcd98] rounded-full flex items-center justify-center mb-4 shadow-inner">
                        <span class="text-[#d95940] font-bold text-2xl font-serif">ç¦</span>
                    </div>
                    <h2 class="text-[#ebcd98] text-xl tracking-widest font-medium">2025Â·ä¹™å·³è›‡å¹´</h2>
                    <p class="text-[#ebcd98]/80 text-sm mt-2">ç‚¹å‡»å¼€å¯å¥½è¿</p>
                </div>
                
                <!-- å¼€å­—æŒ‰é’® -->
                <div class="absolute top-[65%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20">
                    <div class="w-24 h-24 rounded-full bg-[#ebcd98] shadow-[0_4px_14px_rgba(0,0,0,0.3)] flex items-center justify-center border-[4px] border-[#ebcd98] transition-transform active:scale-95">
                         <div class="w-20 h-20 rounded-full border border-[#d95940]/20 flex items-center justify-center">
                            <span class="text-[#333] font-serif font-bold text-4xl select-none">å¼€</span>
                         </div>
                    </div>
                </div>

                <!-- åº•éƒ¨ç¥ç¦ -->
                <div class="absolute bottom-8 w-full text-center z-0">
                    <p class="text-[#ebcd98]/40 text-xs tracking-[0.5em]">å¤§å‰å¤§åˆ©</p>
                </div>
            </div>
        </div>
    </div>

    <!-- å±å¹•2ï¼šå¥½è¿ç­¾ç»“æœ -->
    <div id="screen-result" class="screen hidden-screen z-10">
        <div class="w-full h-full md:max-w-[400px] md:h-[90vh] relative md:rounded-3xl overflow-hidden shadow-2xl bg-black">
            <!-- ç»“æœèƒŒæ™¯å›¾ -->
            <img id="result-bg" src="" class="absolute inset-0 w-full h-full object-cover opacity-80 transition-opacity duration-1000">
            <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/90"></div>
            
            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="absolute inset-0 z-10 flex flex-col justify-between p-8 pb-12 animate-fade-in">
                <!-- é¡¶éƒ¨æ—¥æœŸ -->
                <div class="flex justify-between items-center mt-4 opacity-80">
                    <div class="flex items-center gap-2">
                        <span class="text-yellow-200 text-lg">âœ¨</span>
                        <span class="text-xs text-yellow-100 tracking-[0.2em] font-light uppercase">LUCKY 2025</span>
                    </div>
                    <div class="text-xs text-white/60 font-serif" id="current-date"></div>
                </div>

                <!-- æ ¸å¿ƒæ–‡æ¡ˆ -->
                <div class="flex-1 flex items-center justify-center">
                    <div class="text-center relative py-10 px-6 glass-panel rounded-2xl shadow-xl w-full">
                        <span class="absolute top-4 left-4 text-4xl text-white/30 font-serif leading-none">â€œ</span>
                        <div id="greeting-text" class="text-xl md:text-2xl font-serif text-white/95 leading-loose tracking-wide drop-shadow-md min-h-[100px] flex flex-col justify-center">
                            <!-- JS å¡«å……å†…å®¹ -->
                        </div>
                        <span class="absolute bottom-[-10px] right-4 text-4xl text-white/30 font-serif leading-none rotate-180">â€œ</span>
                    </div>
                </div>

                <!-- åº•éƒ¨æŒ‰é’® -->
                <div class="flex justify-center gap-4 mb-safe">
                    <button onclick="regenerate()" class="flex items-center gap-2 px-6 py-3 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-md border border-white/20 transition-all active:scale-95">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M3 21v-5h5"></path></svg>
                        <span class="text-sm font-bold">å†æŠ½ä¸€æ¬¡</span>
                    </button>
                    <!-- åˆ†äº«æŒ‰é’® -->
                    <button onclick="share()" class="flex items-center gap-2 px-6 py-3 rounded-full bg-[#d95940] hover:bg-[#c04830] text-white shadow-lg shadow-red-900/50 transition-all active:scale-95 border border-white/10">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                        <span class="text-sm font-bold">é€ç»™æœ‹å‹</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- æ•°æ®é…ç½® ---
        const GREETINGS = [
            "2025ï¼Œ\nå…è®¸ä¸€åˆ‡å‘ç”Ÿï¼Œ\nåšè‡ªå·±çš„å…‰ï¼Œ\nä¸æ…Œä¸å¿™ï¼Œé—ªé—ªå‘äº®ã€‚",
            "å²å²å¸¸æ¬¢æ„‰ï¼Œ\nä¸‡äº‹çš†èƒœæ„ã€‚\næ–°çš„ä¸€å¹´ï¼Œ\nçƒŸç«å‘æ˜Ÿè¾°ï¼Œæ‰€æ„¿çš†æˆçœŸã€‚",
            "ä¸å…¶å‘å¾€ï¼Œ\nä¸å¦‚å‡ºå‘ã€‚\n2025ï¼Œ\nè¡Œè€Œä¸è¾ï¼Œæœªæ¥å¯æœŸã€‚",
            "ä¿æŒçƒ­çˆ±ï¼Œ\nå¥”èµ´å±±æµ·ã€‚\næ„¿ä½ çš„2025ï¼Œ\nå³ä½¿å•æªåŒ¹é©¬ï¼Œäº¦èƒ½å‹‡æ•¢æ— ç•ã€‚",
            "å‡¡æ˜¯è¿‡å¾€ï¼Œ\nçš†ä¸ºåºç« ã€‚\næ‰€æœ‰ç¾å¥½ï¼Œ\néƒ½åœ¨2025å¦‚çº¦è€Œè‡³ã€‚",
            "ç¥ä½ ï¼š\nå£è¢‹æœ‰é’±ï¼Œ\næ‰‹ä¸­æœ‰ä¹¦ï¼Œ\nçœ¼é‡Œæœ‰å…‰ï¼Œ\nå¿ƒä¸­æœ‰çˆ±ã€‚",
            "2025ï¼Œ\næ²¡æœ‰ä¸å¯æ²»æ„ˆçš„ä¼¤ç—›ï¼Œ\næ²¡æœ‰ä¸èƒ½ç»“æŸçš„æ²‰æ²¦ï¼Œ\næ‰€æœ‰å¤±å»çš„ï¼Œ\néƒ½ä¼šä»¥å¦ä¸€ç§æ–¹å¼å½’æ¥ã€‚",
            "æ„¿ä»Šå¹´æ‰€æœ‰çš„é—æ†¾ï¼Œ\néƒ½æ˜¯æ˜å¹´æƒŠå–œçš„é“ºå«ã€‚\n2025ï¼Œ\nè¯¸äº‹é¡ºé‚ã€‚",
            "è¿™ä¸€å¹´ï¼Œ\nä»…ç¥ä½ ï¼š\nè‡ªç”±ï¼Œè¿·äººï¼Œ\nä¸”å¯Œæœ‰ã€‚",
            "å»çˆ±ï¼Œå»ç”Ÿæ´»ï¼Œ\nå»å—ä¼¤ï¼Œå»æ²»æ„ˆã€‚\n2025ï¼Œ\nå¬ä»å†…å¿ƒçš„å£°éŸ³ã€‚",
            "å³ä½¿ä¸–ç•Œå¶å°”è–„å‡‰ï¼Œ\nå†…å¿ƒä¹Ÿè¦ç¹èŠ±ä¼¼é”¦ã€‚\n2025ï¼Œ\næµ…æµ…å–œï¼Œé™é™çˆ±ã€‚",
            "æˆ‘åœ¨2024çš„å°½å¤´ï¼Œ\nç¥ä½ åœ¨2025çš„å¼€å¤´ï¼š\nå¹³å®‰å–œä¹ï¼Œ\nä¸‡äº‹é¡ºæ„ã€‚"
        ];

        const IMAGES = [
            "https://images.unsplash.com/photo-1548504778-2c97693e506e?q=80&w=1000&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1516075677024-e7c62bf654f5?q=80&w=1000&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1496337589254-7e19d01cec44?q=80&w=1000&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1478147427282-58a87a120781?q=80&w=1000&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1514424365990-edd907309995?q=80&w=1000&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1548123378-bde4eca81d2d?q=80&w=1000&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1514300451569-83952d7e008a?q=80&w=1000&auto=format&fit=crop"
        ];

        // --- æ ¸å¿ƒå˜é‡ ---
        const envelopeScreen = document.getElementById('screen-envelope');
        const resultScreen = document.getElementById('screen-result');
        const greetingText = document.getElementById('greeting-text');
        const resultBg = document.getElementById('result-bg');
        const dateEl = document.getElementById('current-date');
        const audio = document.getElementById('bg-music');
        let isOpened = false;

        // åˆå§‹åŒ–æ—¥æœŸ
        dateEl.innerText = new Date().toLocaleDateString('zh-CN');

        // --- éŸ³ä¹è‡ªåŠ¨æ’­æ”¾ Hack (æ ¸å¿ƒä¿®å¤) ---
        // 1. å°è¯•åœ¨å¾®ä¿¡ç¯å¢ƒä¸­è‡ªåŠ¨æ’­æ”¾
        document.addEventListener('WeixinJSBridgeReady', function() {
            tryPlayMusic();
        }, false);

        // 2. å°è¯•åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»é¡µé¢ä»»ä½•åœ°æ–¹æ—¶æ’­æ”¾ï¼ˆè§£å†³iOS Safarié™åˆ¶ï¼‰
        function unlockAudio() {
            tryPlayMusic();
            // æˆåŠŸè§¦å‘åç§»é™¤ç›‘å¬ï¼Œé¿å…é‡å¤è°ƒç”¨
            document.removeEventListener('click', unlockAudio);
            document.removeEventListener('touchstart', unlockAudio);
        }
        document.addEventListener('click', unlockAudio);
        document.addEventListener('touchstart', unlockAudio);

        // å°è¯•æ’­æ”¾éŸ³ä¹çš„å°è£…å‡½æ•°
        function tryPlayMusic() {
            if (audio.paused) {
                audio.volume = 0.4;
                var promise = audio.play();
                if (promise !== undefined) {
                    promise.then(_ => {
                        updateMusicIcon(true);
                    }).catch(error => {
                        console.log("Autoplay prevented by browser policy", error);
                    });
                }
            }
        }

        // --- ä¸šåŠ¡é€»è¾‘ ---
        function getRandom(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function updateContent() {
            const text = getRandom(GREETINGS);
            greetingText.innerHTML = text.replace(/\n/g, '<br/>');
            
            const img = getRandom(IMAGES);
            resultBg.style.opacity = '0';
            setTimeout(() => {
                resultBg.src = img;
                resultBg.onload = () => {
                    resultBg.style.opacity = '0.8';
                }
            }, 300);
        }

        function openEnvelope() {
            if (isOpened) return;
            isOpened = true;
            
            // å†æ¬¡å°è¯•å¼ºåˆ¶æ’­æ”¾éŸ³ä¹
            tryPlayMusic();

            updateContent();

            envelopeScreen.style.transform = 'scale(1.5)';
            envelopeScreen.style.opacity = '0';
            
            setTimeout(() => {
                envelopeScreen.classList.add('hidden-screen');
                resultScreen.classList.remove('hidden-screen');
                for(let i=0; i<5; i++) {
                    setTimeout(() => createRandomFirework(), i * 300);
                }
            }, 600);
        }

        function regenerate() {
            greetingText.style.opacity = '0';
            setTimeout(() => {
                updateContent();
                greetingText.style.opacity = '1';
                createRandomFirework();
            }, 300);
        }

        function share() {
            const url = window.location.href;
            const text = `é€ä½ ä¸€å¼ 2025æ–°å¹´å¥½è¿ç­¾ï¼š\n\n${greetingText.innerText}\n\nğŸ‘‡ç‚¹å‡»é¢†å–ä½ çš„ä¸“å±ç¥ç¦ï¼š${url}`;
            
            if (navigator.share) {
                navigator.share({ title: '2025æ–°å¹´å¥½è¿ç­¾', text: text, url: url }).catch(console.error);
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    alert('é“¾æ¥å’Œç¥ç¦å·²å¤åˆ¶ï¼å¿«å»å‘ç»™æœ‹å‹å§~');
                }).catch(() => {
                    alert('è¯·å¤åˆ¶æµè§ˆå™¨ä¸Šæ–¹é“¾æ¥åˆ†äº«ç»™æœ‹å‹å“¦');
                });
            }
        }

        // --- éŸ³ä¹æ§åˆ¶æ‰‹åŠ¨å¼€å…³ ---
        function toggleMusic(e) {
            // é˜»æ­¢å†’æ³¡ï¼Œé˜²æ­¢è§¦å‘å…¨å±€çš„ unlockAudio
            if(e) e.stopPropagation(); 
            
            if (audio.paused) {
                audio.play();
                updateMusicIcon(true);
            } else {
                audio.pause();
                updateMusicIcon(false);
            }
        }

        function updateMusicIcon(playing) {
            const wrapper = document.getElementById('music-icon-wrapper');
            const onIcon = document.getElementById('music-icon-on');
            const offIcon = document.getElementById('music-icon-off');
            
            if (playing) {
                onIcon.classList.remove('hidden');
                offIcon.classList.add('hidden');
                wrapper.classList.add('animate-spin-slow'); // æ’­æ”¾æ—¶æ—‹è½¬å›¾æ ‡
            } else {
                onIcon.classList.add('hidden');
                offIcon.classList.remove('hidden');
                wrapper.classList.remove('animate-spin-slow');
            }
        }

        // --- çƒŸèŠ±æ•ˆæœ (Canvas) ---
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3 + 1;
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.life = 100;
                this.color = color;
                this.size = Math.random() * 2 + 1;
                this.decay = Math.random() * 1.5 + 0.5;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vx *= 0.95;
                this.vy *= 0.95;
                this.vy += 0.04; 
                this.life -= this.decay;
            }
            draw(ctx) {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = Math.max(this.life / 100, 0);
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        function createFirework(x, y) {
            const colors = ['#FFD700', '#FFA500', '#FF4500', '#E6E6FA', '#FFF']; 
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < 50; i++) {
                particles.push(new Particle(x, y, color));
            }
        }

        function createRandomFirework() {
            createFirework(
                Math.random() * canvas.width, 
                Math.random() * canvas.height * 0.6
            );
        }

        function animateFireworks() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].draw(ctx);
                if (particles[i].life <= 0) particles.splice(i, 1);
            }
            requestAnimationFrame(animateFireworks);
        }
        
        animateFireworks();
        setInterval(() => {
            if (Math.random() < 0.3) createRandomFirework();
        }, 1500);

        window.addEventListener('click', (e) => {
            if (e.target.closest('button') || e.target.closest('.relative')) return;
            createFirework(e.clientX, e.clientY);
        });
    </script>
</body>
</html>